(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{104:function(e,t){},106:function(e,t){},146:function(e,t,s){},147:function(e,t,s){},149:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(25),r=s.n(a),i=s(5),o=s(11),l=(s(89),s(54)),d=s.n(l),j=s(77),u=s(78),b=s.n(u),m=s(153),h=s(152),x=s(154),g=s(1);function O(e){var t=e.children;return Object(n.useEffect)((function(){document.title="Fast Chat"})),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(m.a,{bg:"light",expand:"lg",children:Object(g.jsxs)(h.a,{children:[Object(g.jsx)(m.a.Brand,{href:"#home",className:"text-primary",children:"Fast Chat"}),Object(g.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsx)(m.a.Collapse,{id:"basic-navbar-nav",children:Object(g.jsx)(x.a,{className:"me-auto",children:Object(g.jsx)(x.a.Link,{children:Object(g.jsx)("button",{className:"btn text-dark",onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/signout");case 2:"redirect"===e.sent.data.message&&(window.location="/login");case 4:case"end":return e.stop()}}),e)}))),children:"logout"})})})})]})}),window.innerWidth<900?Object(g.jsx)("main",{children:t}):Object(g.jsx)("div",{className:"container-fluid mt-2",children:Object(g.jsx)("main",{children:t})})]})}function f(e,t,s){e.on("receive message",(function(e){t[e.from]?t[e.from].push(e.message):t[e.from]=[e.message],s(JSON.stringify(t))})),e.on("message threads",(function(e){s(JSON.stringify(e))}))}var v=s.p+"static/media/send.7d8ecc6d.svg",p=s.p+"static/media/chevron-left.c80cdd8e.svg";s.p;function y(e){var t=e.messageThreadObj,s=e.currentExchangeTo,c=e.socket,a=e.setMessageThread,r=e.width,i=e.setCurrentExchangeTo;Object(n.useEffect)((function(){var e=document.getElementById("messages-thread-box");e.scrollTop=e.scrollHeight}));var o=Object.keys(t);if(s)if(-1!==o.indexOf(s))var l=o.map((function(e){if(e===s){var n=t[e].map((function(e){return e.self?Object(g.jsx)("div",{className:"mb-2 ",style:{display:"flex",justifyContent:"right"},children:Object(g.jsx)("li",{className:"message-box own-text-bubble",children:e.text})}):Object(g.jsx)("div",{className:"mb-2",children:Object(g.jsx)("li",{className:"message-box recepient-text-bubble",children:e.text})})}));return Object(g.jsx)("div",{children:n})}}));else t[s]=[],a(JSON.stringify(t));return Object(g.jsx)("div",{className:"col-md-9",style:{padding:0},children:Object(g.jsxs)("div",{className:"h-100 contain-messages",children:[Object(g.jsx)("div",{className:"p-1 exchangeUsername",children:Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[r<950&&Object(g.jsx)("div",{style:{paddingRight:10},onClick:function(){i(void 0)},children:Object(g.jsx)("img",{src:p})}),Object(g.jsx)("h4",{style:{paddingLeft:10},className:"text-muted text-center ",children:s})]})}),Object(g.jsxs)("div",{className:"messages-thread-container",id:"messages-thread-box",children:[0===o.length&&Object(g.jsxs)("div",{style:{position:"absolute",top:"45%",left:"47%"},children:[Object(g.jsx)("h4",{children:"Enter Username and Text Someone!"}),Object(g.jsx)("div",{style:{position:"relative",left:120},children:Object(g.jsx)("button",{className:"btn btn-primary",onClick:function(){document.getElementById("username-search-box").select()},children:"New Message"})})]}),Object(g.jsx)("ul",{className:"",children:l})]}),Object(g.jsxs)("form",{className:"row message-form",children:[Object(g.jsx)("input",{type:"text",className:"col ml-1 input-style",id:"chat_box",placeholder:"message"}),Object(g.jsx)("div",{className:"col-2 ",children:Object(g.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();document.getElementById("messages-thread-box");var n=document.getElementById("chat_box").value;if(n&&s){c.emit("chat message",n,s);var r={text:n,self:!0};t[s]?t[s].push(r):(t[s]=[r],console.log(t)),a(JSON.stringify(t)),document.getElementById("chat_box").value=""}},className:"btn btn-light round-button col w-100",children:Object(g.jsx)("img",{src:v})})})]})]})})}var N=s.p+"static/media/arrow-return-left.abaa8f9a.svg";function w(e){var t=e.setCurrentExchangeTo,s=e.messageThreadsObj,n=e.currentExchangeTo,c=e.width,a=Object.keys(s);!n&&c>900&&t(a[0]);var r=a.map((function(e){var s=e===n?" active ":"";return Object(g.jsx)("li",{id:e,className:"list-group-item"+s,onClick:function(s){n&&document.getElementById(n).classList.remove("active"),s.currentTarget.classList.add("active"),t(e)},children:Object(g.jsx)("div",{className:"",children:e})})}));return Object(g.jsxs)("div",{className:"task-bar col-md-3",children:[Object(g.jsxs)("form",{className:"row container-fluid w-100",style:{justifyContent:"center"},children:[Object(g.jsx)("input",{type:"text",className:" mb-4 input-style username-search-input col-8",id:"username-search-box",placeholder:"username"}),Object(g.jsx)("button",{type:"submit",class:"col-3 btn btn-light enter-button",onClick:function(e){e.preventDefault();var s=document.getElementById("username-search-box").value;document.getElementById("chat_box").select(),t(s)},children:Object(g.jsx)("img",{src:N})})]}),0===a.length&&c<950&&Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("h4",{children:"Enter Username and Text Someone!"}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{className:"btn btn-primary",onClick:function(){document.getElementById("username-search-box").select()},children:"New Message"})})]}),Object(g.jsx)("ul",{class:"list-group",children:r})]})}function E(e){var t=e.socket,s=Object(n.useState)(JSON.stringify({})),c=Object(o.a)(s,2),a=c[0],r=c[1],l=Object(n.useState)(void 0),d=Object(o.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(window.innerWidth),m=Object(o.a)(b,2),h=m[0],x=m[1];!function(e){e.on("users",(function(t){t.forEach((function(t){t.self=t.userID===e.id}))})),e.on("session",(function(t){var s={sessionID:t.passport.user,userID:t.userID,username:t.username};console.log(s,"session cookie to create");var n=JSON.parse(localStorage.getItem("sessionCookie"));console.log(n,"storedSessionCookie"),n?e.userID=n.userID:(localStorage.setItem("sessionCookie",JSON.stringify(s)),e.userID=t.userID)}))}(t);var v=JSON.parse(a);return f(t,v,r),Object(n.useEffect)((function(){window.addEventListener("resize",(function(){var e=window.innerWidth;x(e)}))})),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(O,{children:h<950?Object(g.jsx)(g.Fragment,{children:j?Object(g.jsx)(y,{currentExchangeTo:j,messageThreadObj:v,socket:t,setMessageThread:r,width:h,setCurrentExchangeTo:u}):Object(g.jsx)(w,Object(i.a)({width:h,currentExchangeTo:j,messageThreadsObj:v,setCurrentExchangeTo:u},"width",h))}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"container-fluid w-100 row",children:[Object(g.jsx)(w,{width:h,currentExchangeTo:j,messageThreadsObj:v,setCurrentExchangeTo:u}),Object(g.jsx)(y,{currentExchangeTo:j,messageThreadObj:v,socket:t,setMessageThread:r,setCurrentExchangeTo:u,width:h})]})})})})}s(146),s(147);var T=s(84),k=(s(148),Object(T.a)());r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(E,{socket:k})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.c32ab1bc.chunk.js.map